<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>View All Employees</title>

<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
	integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
	crossorigin="anonymous">

</head>
<body>
	<div class="jumbotron" align="center">
		<h1 id="welcome">You are Logged in!</h1>

		<a class="btn btn success" onclick="logout()">Logout</a>

	</div>

	<table id="myTable" style="width: 100%" class="table table-dark">
		<tr>
			<th scope="col">Id</th>
			<th scope="col">Username</th>
			<th scope="col">password</th>
			<th scope="col">First Name</th>
			<th scope="col">Last Name</th>
			<th scope="col">E-mail</th>
			<th scope="col">Role Id</th>
		</tr>
	</table>
	
	<form>
	<a type="submit" href="viewbyemployee.html" class="btn btn-primary">View By Employee</a>
	
	</form>


	<script>
		
	let welcome = document.getElementById('welcome');

	let userString = sessionStorage.getItem('currentUser');
	
	let viewEmployeesString = sessionStorage.getItem('employees');
	
	if (userString === null) {
		window.location = "http://localhost:8080/EmployeeReimbursementSystem/";
	} else {
		
		let currentUser = JSON.parse(userString); 
		
		var viewEmployees = JSON.parse(viewEmployeesString); 
		
		console.log(currentUser);
		console.log(viewEmployees);
		
		if (currentUser != null) {
			
			welcome.innerHTML = "Welcome " + currentUser.firstName + " " + currentUser.lastName;
			
		}
		
	}
	
	function createTable() {

	    var table = document.getElementById("myTable");

	    viewEmployees.forEach( (obj) => {

	        // 1. for each object create a new row (<tr>) and stick it onto (append) the table that exists
	        let tr = document.createElement("tr");
	        table.appendChild(tr);

	        // 2. for each obj enter some data (<td>)
	        let td = document.createElement("td");
	            
	            tr.appendChild(td);
	            td.innerHTML = obj.id;
	            td = document.createElement("td");
	            tr.appendChild(td);
	            td.innerHTML = obj.username;
	            td = document.createElement("td");
	            tr.appendChild(td);
	            td.innerHTML = obj.password;
	            td = document.createElement("td");
	            tr.appendChild(td);
	            td.innerHTML = obj.firstName;
	            td = document.createElement("td");
	            tr.appendChild(td);
	            td.innerHTML = obj.lastName;
	            td = document.createElement("td");
	            tr.appendChild(td);
	            td.innerHTML = obj.userEmail;
	            td = document.createElement("td");
	            tr.appendChild(td);
	            td.innerHTML = obj.roleId;
	        });
	}
	window.onload = createTable(viewEmployees)

	</script>

	<script src="scripts/index.js"></script>



</body>
</html>